/* ===== TipTap 编辑器排版 — Mink 编辑器 ===== */

/* Editor container */
.mink-editor {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px 15px 80px;
    outline: none;
    min-height: 100%;
    font-family: var(--font-sans);
    font-size: 16px;
    line-height: 1.8;
    color: var(--text-primary);
    caret-color: var(--accent);
}

/* Restore native caret during IME composition */
.mink-editor.is-composing {
    caret-color: var(--accent);
}

/* ----- Placeholder ----- */
.mink-editor p.is-editor-empty:first-child::before {
    content: attr(data-placeholder);
    float: left;
    color: var(--text-muted);
    pointer-events: none;
    height: 0;
    font-style: italic;
}

/* ----- Headings ----- */
.mink-editor h1 {
    font-size: 2em;
    font-weight: 700;
    margin: 1em 0 0.6em;
    padding-bottom: 0.3em;
    border-bottom: 1px solid var(--border);
    line-height: 1.3;
}

.mink-editor h2 {
    font-size: 1.5em;
    font-weight: 600;
    margin: 0.8em 0 0.5em;
    padding-bottom: 0.25em;
    border-bottom: 1px solid var(--border-light);
    line-height: 1.35;
}

.mink-editor h3 {
    font-size: 1.25em;
    font-weight: 600;
    margin: 0.6em 0 0.4em;
    line-height: 1.4;
}

.mink-editor h4 {
    font-size: 1.1em;
    font-weight: 600;
    margin: 0.5em 0 0.3em;
}

.mink-editor h5,
.mink-editor h6 {
    font-size: 1em;
    font-weight: 600;
    margin: 0.4em 0 0.2em;
    color: var(--text-secondary);
}

/* ----- Paragraphs & Inline ----- */
.mink-editor p {
    margin: 0.5em 0;
}

.mink-editor strong {
    font-weight: 700;
}

.mink-editor em {
    font-style: italic;
}

.mink-editor s,
.mink-editor del {
    text-decoration: line-through;
    color: var(--text-muted);
}

.mink-editor mark {
    background: #fff3b0;
    padding: 1px 4px;
    border-radius: 2px;
}

[data-theme="dark"] .mink-editor mark {
    background: #4a3c00;
    color: #ffd700;
}

/* ----- Links ----- */
.mink-editor a,
.mink-editor .editor-link {
    color: var(--text-link);
    text-decoration: underline;
    text-underline-offset: 3px;
    cursor: pointer;
}

.mink-editor a:hover {
    color: var(--accent-hover);
}

/* ----- Inline Code ----- */
.mink-editor code {
    font-family: var(--font-mono);
    font-size: 0.9em;
    background: var(--bg-code);
    color: var(--text-code);
    padding: 2px 6px;
    border-radius: 4px;
}

/* ----- Code Blocks ----- */
.mink-editor pre {
    background: var(--bg-code-block);
    color: #abb2bf;
    border-radius: 6px;
    padding: 16px 20px;
    margin: 1em 0;
    overflow-x: auto;
    font-family: var(--font-mono);
    font-size: 14px;
    line-height: 1.6;
}

.mink-editor pre code {
    background: none;
    color: inherit;
    padding: 0;
    border-radius: 0;
    font-size: inherit;
}

/* hljs token colors */
.mink-editor pre .hljs-keyword {
    color: #c678dd;
}

.mink-editor pre .hljs-string {
    color: #98c379;
}

.mink-editor pre .hljs-number {
    color: #d19a66;
}

.mink-editor pre .hljs-comment {
    color: #5c6370;
    font-style: italic;
}

.mink-editor pre .hljs-function {
    color: #61afef;
}

.mink-editor pre .hljs-title {
    color: #61afef;
}

.mink-editor pre .hljs-params {
    color: #abb2bf;
}

.mink-editor pre .hljs-built_in {
    color: #e6c07b;
}

.mink-editor pre .hljs-attr {
    color: #d19a66;
}

.mink-editor pre .hljs-tag {
    color: #e06c75;
}

.mink-editor pre .hljs-name {
    color: #e06c75;
}

.mink-editor pre .hljs-selector-class {
    color: #d19a66;
}

.mink-editor pre .hljs-selector-id {
    color: #61afef;
}

.mink-editor pre .hljs-attribute {
    color: #d19a66;
}

.mink-editor pre .hljs-meta {
    color: #61afef;
}

.mink-editor pre .hljs-type {
    color: #e6c07b;
}

/* ----- Blockquote ----- */
.mink-editor blockquote {
    border-left: 4px solid var(--accent);
    margin: 1em 0;
    padding: 8px 20px;
    color: var(--text-secondary);
    background: var(--bg-secondary);
    border-radius: 0 6px 6px 0;
}

.mink-editor blockquote p {
    margin: 0.3em 0;
}

/* ----- Lists ----- */
.mink-editor ul,
.mink-editor ol {
    padding-left: 1.5em;
    margin: 0.5em 0;
}

.mink-editor li {
    margin: 0.15em 0;
}

.mink-editor li p {
    margin: 0;
}

/* ----- Task List ----- */
.mink-editor ul[data-type="taskList"] {
    list-style: none;
    padding-left: 0;
}

.mink-editor ul[data-type="taskList"] li {
    display: flex;
    align-items: flex-start;
    gap: 8px;
}

.mink-editor ul[data-type="taskList"] li label {
    display: flex;
    align-items: center;
    margin-top: 3px;
}

.mink-editor ul[data-type="taskList"] li label input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    border: 2px solid var(--text-muted);
    border-radius: 3px;
    cursor: pointer;
    position: relative;
    flex-shrink: 0;
}

.mink-editor ul[data-type="taskList"] li label input[type="checkbox"]:checked {
    background: var(--accent);
    border-color: var(--accent);
}

.mink-editor ul[data-type="taskList"] li label input[type="checkbox"]:checked::after {
    content: '✓';
    position: absolute;
    top: -1px;
    left: 2px;
    font-size: 12px;
    color: white;
    font-weight: bold;
}

.mink-editor ul[data-type="taskList"] li[data-checked="true"]>div>p {
    text-decoration: line-through;
    color: var(--text-muted);
}

/* ----- Table ----- */
.mink-editor table {
    border-collapse: collapse;
    width: 100%;
    margin: 1em 0;
    overflow: hidden;
    border-radius: 4px;
}

.mink-editor th,
.mink-editor td {
    border: 1px solid var(--border);
    padding: 8px 12px;
    text-align: left;
    min-width: 80px;
}

.mink-editor th {
    background: var(--bg-secondary);
    font-weight: 600;
}

.mink-editor .selectedCell {
    background: rgba(64, 120, 192, 0.1);
}

.mink-editor .column-resize-handle {
    position: absolute;
    right: -2px;
    top: 0;
    bottom: -2px;
    width: 4px;
    background-color: var(--accent);
    pointer-events: none;
}

.mink-editor .tableWrapper {
    overflow-x: auto;
    margin: 1em 0;
}

/* ----- Horizontal Rule ----- */
.mink-editor hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: 2em 0;
}

/* ----- Images ----- */
.mink-editor img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    margin: 0.5em 0;
}

/* ----- Selection ----- */
.mink-editor ::selection {
    background: rgba(64, 120, 192, 0.35);
}

/* ----- Focus mode (future) ----- */
.mink-editor.is-focus-mode .ProseMirror-gapcursor {
    opacity: 0.3;
}

/* ----- Markdown Syntax (expanded markers like **) ----- */
.md-syntax {
    color: #aaa;
    font-weight: normal;
    font-style: normal;
    opacity: 0.8;
}
